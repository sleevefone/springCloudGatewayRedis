<div>
    <div class="header">
        <h1>API Client Management</h1>
    </div>

    <div class="create-form-container">
        <input type="text" v-model="newClientDescription" placeholder="Enter a description for the new client...">
        <button class="primary" @click="$emit('create-client', newClientDescription); newClientDescription = ''">+ Create New Client</button>
    </div>

    <!-- Using a native HTML table to avoid external library bugs -->
    <div v-if="loading" class="loading-text">Loading...</div>
    <table v-else class="native-table">
        <thead>
            <tr>
                <th>Description</th>
                <th>AppKey</th>
                <th>SecretKey</th>
                <th>Enabled</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="client in clients" :key="client.id">
                <td>{{ client.description }}</td>
                <td>{{ client.appKey }}</td>
                <td>{{ client.secretKey }}</td>
                <td>
                    <button @click="$emit('update-client-status', client)">
                        {{ client.enabled ? 'Disable' : 'Enable' }}
                    </button>
                </td>
                <td>
                    <button class="danger" @click="$emit('delete-client', client.id)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
