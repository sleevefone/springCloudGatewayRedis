<div>
    <div class="header">
        <h1>Gateway Route Manager</h1>
        <div class="search-container">
            <input type="text" :value="searchQuery" @input="$emit('update:searchQuery', $event.target.value)" @keyup.enter="$emit('query')" placeholder="Search by ID or URI...">
            <button @click="$emit('query')">Query</button>
            <button @click="$emit('reset')">Reset</button>
        </div>
        <button class="primary" @click="$emit('create-route')">+ Create Route</button>
    </div>

    <!-- Re-introducing el-table for its powerful features like scoped slots -->
    <el-table :data="routes" stripe v-loading="loading">
        <el-table-column prop="id" label="ID" width="250"></el-table-column>
        <el-table-column prop="uri" label="URI"></el-table-column>
        <el-table-column prop="order" label="Order" width="80"></el-table-column>
        <el-table-column label="Enabled" width="100">
            <!-- Using a scoped slot to embed the switch component -->
            <template #default="scope">
                <el-switch 
                    v-model="scope.row.enabled" 
                    @change="$emit('toggle-enabled', scope.row)">
                </el-switch>
            </template>
        </el-table-column>
        <el-table-column label="Actions" width="180">
            <template #default="scope">
                <button @click="$emit('edit-route', scope.row)">Edit</button>
                <button class="danger" @click="$emit('delete-route', scope.row.id)">Delete</button>
            </template>
        </el-table-column>
    </el-table>
</div>
